"""
@generated by mypy-protobuf.  Do not edit manually!
isort:skip_file
"""
import builtins
import collections.abc
import google.protobuf.descriptor
import google.protobuf.internal.containers
import google.protobuf.message
import google.protobuf.struct_pb2
import sys

if sys.version_info >= (3, 8):
    import typing as typing_extensions
else:
    import typing_extensions

DESCRIPTOR: google.protobuf.descriptor.FileDescriptor

class Metrics(google.protobuf.message.Message):
    """Result message containing the metrics of the optimization."""

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    class ExtraScoresEntry(google.protobuf.message.Message):
        DESCRIPTOR: google.protobuf.descriptor.Descriptor

        KEY_FIELD_NUMBER: builtins.int
        VALUE_FIELD_NUMBER: builtins.int
        key: builtins.str
        value: builtins.float
        def __init__(
            self,
            *,
            key: builtins.str = ...,
            value: builtins.float = ...,
        ) -> None: ...
        def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...

    FITNESS_FIELD_NUMBER: builtins.int
    EXTRA_SCORES_FIELD_NUMBER: builtins.int
    WORST_K_CONTINGENCY_CASES_FIELD_NUMBER: builtins.int
    fitness: builtins.float
    """The current best fitness value, which is the optimized quantity"""
    @property
    def extra_scores(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.float]:
        """Additional metrics such as max_flow_n_0, etc."""
    @property
    def worst_k_contingency_cases(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]:
        """For contingency analysis, a list of strings (length k) represents the case ids
        of the k worst contingencies.
        """
    def __init__(
        self,
        *,
        fitness: builtins.float = ...,
        extra_scores: collections.abc.Mapping[builtins.str, builtins.float] | None = ...,
        worst_k_contingency_cases: collections.abc.Iterable[builtins.str] | None = ...,
    ) -> None: ...
    def ClearField(self, field_name: typing_extensions.Literal["extra_scores", b"extra_scores", "fitness", b"fitness", "worst_k_contingency_cases", b"worst_k_contingency_cases"]) -> None: ...

global___Metrics = Metrics

class Topology(google.protobuf.message.Message):
    """A results class encapsulating a single topology for a single timestep in action index format."""

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    ACTIONS_FIELD_NUMBER: builtins.int
    DISCONNECTIONS_FIELD_NUMBER: builtins.int
    PST_SETPOINTS_FIELD_NUMBER: builtins.int
    METRICS_FIELD_NUMBER: builtins.int
    LOADFLOW_RESULTS_FIELD_NUMBER: builtins.int
    @property
    def actions(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]:
        """The branch/injection reconfiguration actions as indices into the action set. This can only be parsed
        when combined with the action set. This includes only actions that are actually used, i.e. no int_max entries.
        Actions will be automatically sorted in ascending order, as the order does not matter and we want
        to avoid duplicates.
        """
    @property
    def disconnections(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]:
        """The applied disconnections in this topology as an index into the disconnectable branches set in the action set.
        This includes only disconnections that are actually used, i.e. no int_max entries.
        Disconnections will be automatically sorted in ascending order, as the order does not matter and we want
        to avoid duplicates.
        """
    @property
    def pst_setpoints(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]:
        """The setpoints for the PSTs if they have been computed. This is an index into the range of pst taps, i.e. the
        smallest tap is 0 and the neutral tap somewhere in the middle of the range. The tap range is defined in the action set.
        The list always has the same length, i.e. the number of controllable PSTs in the system, and each entry corresponds to
        the PST at the same position in the action set.
        TODO currently this is just the angle converted to int, will be changed later to be the actual tap position.
        """
    @property
    def metrics(self) -> global___Metrics:
        """The metrics of this topology and timestep. While the optimizer might optimize for all
        timesteps, these metrics should be broken down on a per-timestep basis if possible as they will
        be summed up before processing.
        """
    @property
    def loadflow_results(self) -> google.protobuf.struct_pb2.Struct:
        """The loadflow results of this topology in this timestep, if they were computed. Mostly for AC
        results, as for DC we don't need to send full loadflow results every time.
        This is a reference to the loadflow results stored on disk as sending them every time would be too large.
        """
    def __init__(
        self,
        *,
        actions: collections.abc.Iterable[builtins.int] | None = ...,
        disconnections: collections.abc.Iterable[builtins.int] | None = ...,
        pst_setpoints: collections.abc.Iterable[builtins.int] | None = ...,
        metrics: global___Metrics | None = ...,
        loadflow_results: google.protobuf.struct_pb2.Struct | None = ...,
    ) -> None: ...
    def HasField(self, field_name: typing_extensions.Literal["loadflow_results", b"loadflow_results", "metrics", b"metrics"]) -> builtins.bool: ...
    def ClearField(self, field_name: typing_extensions.Literal["actions", b"actions", "disconnections", b"disconnections", "loadflow_results", b"loadflow_results", "metrics", b"metrics", "pst_setpoints", b"pst_setpoints"]) -> None: ...

global___Topology = Topology

class Strategy(google.protobuf.message.Message):
    """A series of topologies over multiple timesteps. This is basically a list of topologies,
    one for every timestep.
    """

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    TIMESTEPS_FIELD_NUMBER: builtins.int
    @property
    def timesteps(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___Topology]:
        """The topologies for every timestep"""
    def __init__(
        self,
        *,
        timesteps: collections.abc.Iterable[global___Topology] | None = ...,
    ) -> None: ...
    def ClearField(self, field_name: typing_extensions.Literal["timesteps", b"timesteps"]) -> None: ...

global___Strategy = Strategy

class TopologyPushResult(google.protobuf.message.Message):
    """A message that pushes new topology results. These must include the topo-vects
    and disconnections and may include loadflow results.
    """

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    MESSAGE_TYPE_FIELD_NUMBER: builtins.int
    STRATEGIES_FIELD_NUMBER: builtins.int
    EPOCH_FIELD_NUMBER: builtins.int
    message_type: builtins.str
    """The result type, don't change this"""
    @property
    def strategies(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___Strategy]:
        """The strategies to be pushed to the master. Each strategy contains a list of timestep-
        topologies, one for every timestep that was optimized (i.e. Strategy.timesteps have the
        same length for all strategies)
        """
    epoch: builtins.int
    """The epoch of the optimization run. Enables plotting the results over time on backend side."""
    def __init__(
        self,
        *,
        message_type: builtins.str = ...,
        strategies: collections.abc.Iterable[global___Strategy] | None = ...,
        epoch: builtins.int = ...,
    ) -> None: ...
    def ClearField(self, field_name: typing_extensions.Literal["epoch", b"epoch", "message_type", b"message_type", "strategies", b"strategies"]) -> None: ...

global___TopologyPushResult = TopologyPushResult

class OptimizationStoppedResult(google.protobuf.message.Message):
    """A message that is sent if the optimization was successfully stopped."""

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    MESSAGE_TYPE_FIELD_NUMBER: builtins.int
    REASON_FIELD_NUMBER: builtins.int
    MESSAGE_FIELD_NUMBER: builtins.int
    EPOCH_FIELD_NUMBER: builtins.int
    message_type: builtins.str
    """The result type, don't change this"""
    reason: builtins.str
    """The reason why the optimization was stopped

    Possible values:
    - Error means an unexpected exception was raised/the optimizer crashed
    - Stopped means it was stopped through a command
    - Converged means it stopped after hitting the convergence criterium
    - ac-not-converged means the AC convergence in the base grid was too poor to run an AC optimization, this will
      only be sent by the AC optimizer.
    """
    message: builtins.str
    """A message that can be sent with the stop message, i.e. an error message"""
    epoch: builtins.int
    """The epoch of the optimization run when it was stopped."""
    def __init__(
        self,
        *,
        message_type: builtins.str = ...,
        reason: builtins.str = ...,
        message: builtins.str = ...,
        epoch: builtins.int = ...,
    ) -> None: ...
    def ClearField(self, field_name: typing_extensions.Literal["epoch", b"epoch", "message", b"message", "message_type", b"message_type", "reason", b"reason"]) -> None: ...

global___OptimizationStoppedResult = OptimizationStoppedResult

class OptimizationStartedResult(google.protobuf.message.Message):
    """Result message for when an optimization run has just started."""

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    MESSAGE_TYPE_FIELD_NUMBER: builtins.int
    INITIAL_TOPOLOGY_FIELD_NUMBER: builtins.int
    INITIAL_STATS_FIELD_NUMBER: builtins.int
    message_type: builtins.str
    """The result type, don't change this"""
    @property
    def initial_topology(self) -> global___Strategy:
        """The initial topology including the starting metrics of the optimization. This is the topology
        without any splits or disconnections
        """
    @property
    def initial_stats(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[google.protobuf.struct_pb2.Struct]:
        """The initial statistics of the optimization run, i.e. the number of disconnections, etc. This is only filled
        by the DC optimizer and will hold one entry for each timestep in the initial topology.
        """
    def __init__(
        self,
        *,
        message_type: builtins.str = ...,
        initial_topology: global___Strategy | None = ...,
        initial_stats: collections.abc.Iterable[google.protobuf.struct_pb2.Struct] | None = ...,
    ) -> None: ...
    def HasField(self, field_name: typing_extensions.Literal["initial_topology", b"initial_topology"]) -> builtins.bool: ...
    def ClearField(self, field_name: typing_extensions.Literal["initial_stats", b"initial_stats", "initial_topology", b"initial_topology", "message_type", b"message_type"]) -> None: ...

global___OptimizationStartedResult = OptimizationStartedResult

class Result(google.protobuf.message.Message):
    """A generic result message sent back from the optimizer to the results topic.
    Results can be read by either the backend or another optimizer in the waterfall.
    """

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    TOPOLOGY_PUSH_FIELD_NUMBER: builtins.int
    STOPPED_FIELD_NUMBER: builtins.int
    OPTIMIZATION_STARTED_FIELD_NUMBER: builtins.int
    OPTIMIZATION_ID_FIELD_NUMBER: builtins.int
    OPTIMIZER_TYPE_FIELD_NUMBER: builtins.int
    INSTANCE_ID_FIELD_NUMBER: builtins.int
    UUID_FIELD_NUMBER: builtins.int
    TIMESTAMP_FIELD_NUMBER: builtins.int
    @property
    def topology_push(self) -> global___TopologyPushResult: ...
    @property
    def stopped(self) -> global___OptimizationStoppedResult: ...
    @property
    def optimization_started(self) -> global___OptimizationStartedResult: ...
    optimization_id: builtins.str
    """The optimization id as sent in the commands"""
    optimizer_type: builtins.str
    """On which type of optimizer created this result"""
    instance_id: builtins.str
    """The instance id of the optimizer that created this result"""
    uuid: builtins.str
    """A unique identifier for this result message, used to avoid duplicates during processing"""
    timestamp: builtins.str
    """When the result was sent"""
    def __init__(
        self,
        *,
        topology_push: global___TopologyPushResult | None = ...,
        stopped: global___OptimizationStoppedResult | None = ...,
        optimization_started: global___OptimizationStartedResult | None = ...,
        optimization_id: builtins.str = ...,
        optimizer_type: builtins.str = ...,
        instance_id: builtins.str = ...,
        uuid: builtins.str = ...,
        timestamp: builtins.str = ...,
    ) -> None: ...
    def HasField(self, field_name: typing_extensions.Literal["optimization_started", b"optimization_started", "result", b"result", "stopped", b"stopped", "topology_push", b"topology_push"]) -> builtins.bool: ...
    def ClearField(self, field_name: typing_extensions.Literal["instance_id", b"instance_id", "optimization_id", b"optimization_id", "optimization_started", b"optimization_started", "optimizer_type", b"optimizer_type", "result", b"result", "stopped", b"stopped", "timestamp", b"timestamp", "topology_push", b"topology_push", "uuid", b"uuid"]) -> None: ...
    def WhichOneof(self, oneof_group: typing_extensions.Literal["result", b"result"]) -> typing_extensions.Literal["topology_push", "stopped", "optimization_started"] | None: ...

global___Result = Result
